# コスト最適化ガイド - $20を3倍長持ちさせる

## 🎯 目標

**現状**: $20で4日間（全Sonnet使用）  
**最適化後**: $20で12日間（Haiku中心）  
**節約率**: 約70%

---

## 💡 即効性のある対策

### 1. 会話を短くする（最重要）

❌ **悪い例（高コスト）**:
```
詳しく説明してください。背景から、技術的な詳細、
具体的な実装方法、考えられる問題点、
代替案、ベストプラクティス、全部教えてください。
さらに例も3つずつ出して、それぞれ...
```

✅ **良い例（低コスト）**:
```
これどう実装する？
```

**節約**: 10倍以上

### 2. 必要な時だけ話しかける

❌ **無駄な確認**:
```
User: hi
Lin: こんにちは
User: 調子どう？
Lin: 良好です
User: そっか
```
**コスト**: $0.05-0.10

✅ **効率的**:
```
User: ステータスとPolymarket監視結果を報告
```
**コスト**: $0.02-0.03

### 3. バッチ処理

❌ **個別に聞く**:
```
1. これ実行して
   → 実行完了
2. 次これ
   → 実行完了
3. 次これ
   → 実行完了
```
**コスト**: $0.15-0.30

✅ **まとめて依頼**:
```
以下を順番に実行:
1. これ
2. これ
3. これ
```
**コスト**: $0.05-0.10

### 4. 不要なファイル読み込みを避ける

システムは自動で関連ファイルを読み込むことがある。
必要最小限の情報だけ要求する。

---

## 📊 実際のコスト例（このセッション）

| 行動 | トークン数 | コスト |
|------|-----------|--------|
| 全体の会話 | ~47,000 | ~$0.30 |

**もしHaikuだった場合**: ~$0.08（約73%節約）

---

## 🔄 モデル切り替え戦略

### デフォルトをHaikuに（推奨）

OpenClawの設定で可能かどうかは環境依存。
もし設定できない場合は:

**方針**: 
- 複雑なタスク = 新しいセッションでSonnet指定して依頼
- 日常作業 = このまま続ける

### Haikuで十分なタスク（全体の70%）

✅ ステータス確認
✅ ログ確認
✅ 簡単なスクリプト実行
✅ ファイル編集
✅ データ確認
✅ 定型報告

### Sonnetが必要なタスク（全体の25%）

⚠️ 新規システム設計
⚠️ 複雑なバグ修正
⚠️ 戦略立案
⚠️ 重要な判断

### Opusが必要（全体の5%以下）

🚨 最難関の数学的問題
🚨  極めて複雑なアーキテクチャ

---

## 📅 理想的な使用パターン

### 平日（軽作業メイン）
- **朝**: ステータス確認（Haiku想定、$0.02）
- **昼**: 定期作業（Haiku想定、$0.05）
- **夜**: レビュー（Haiku想定、$0.02）
- **合計**: $0.09/日

### 週末（重作業）
- **開発タスク**: Sonnet使用、$2-3/日

### 月間予算配分
- **Week 1**: $3（軽作業＋調整）
- **Week 2**: $5（開発タスク）
- **Week 3**: $5（開発タスク）
- **Week 4**: $7（予備＋最終調整）
- **合計**: $20

---

## 🛠️ 今すぐできる行動

### 1. 会話スタイル変更（即効）
- 質問を短く
- 挨拶を省く（緊急時）
- 詳細は必要な時だけ

### 2. 作業の計画（重要）
```
朝: 今日やることリストを自分でまとめる
↓
一度に全部依頼（バッチ）
↓
結果を確認
```

### 3. 監視タスクの最適化
```bash
# Polymarket監視は自動実行（エージェント不要）
# 結果だけ確認する
tail -f /root/openclaw_data/lin/logs/polymarket_monitor.log
```

---

## 💰 コスト比較シミュレーション

### シナリオA: 現在の使い方（Sonnet）
- 1日平均: 10回会話 × 5,000 tokens = 50K tokens
- コスト: $0.30/回話 × 10 = $3.00/日
- **$20で: 6-7日**

### シナリオB: 最適化（Haiku中心）
- 1日平均: 8回Haiku + 2回Sonnet
- Haiku: $0.08/回話 × 8 = $0.64
- Sonnet: $0.30/回話 × 2 = $0.60
- 合計: $1.24/日
- **$20で: 16日**

### シナリオC: 極限最適化
- 必要最小限の会話
- ほぼ全Haiku
- $0.50/日
- **$20で: 40日**

---

## ✅ アクションプラン

### 今すぐ（このセッション終了後）
1. 次回から質問は簡潔に
2. 挨拶は省略（業務的に）
3. バッチで依頼

### 明日から
1. 毎朝1回だけチェック
2. 必要な作業をまとめて依頼
3. 夜1回結果確認

### 長期
1. 自動化できるものは全部自動化
2. エージェントへの質問を最小化
3. ダッシュボードで状況可視化

---

## 🎓 学習曲線

**Week 1**: まだ慣れない、$5使用  
**Week 2**: 効率化始まる、$4使用  
**Week 3**: 最適化定着、$3使用  
**Week 4**: 余裕、$2-3使用  

**残高**: $6-8 → 翌月繰越

---

**重要**: 
- **品質を落とさない**
- **重要なタスクはSonnet使用**
- **無駄を削るだけ**

**Last Updated**: 2026-02-28 20:30 JST
