# Polymarket Arbitrage Bot Project

**開始日**: 2026-02-21  
**目標**: YES+NO価格の合計が$1未満の瞬間を捉えてリスクフリー利益を確保

## 戦略概要

### コア原理
- Polymarketでは YES + NO = $1 が理論値
- 市場のパニック時に YES + NO < $1 になる瞬間がある
- **両方を同時購入すれば、決済時に必ず$1が保証される**
- 差額 = リスクフリー利益

### 実例（Blazeの事例）
- 総利益: $493K
- 実行回数: 29,256回
- 平均利益: $16.85/取引
- 稼働: 24/7完全自動

### なぜ機能するのか
1. **人間の感情**: パニック売り・買いで価格が歪む
2. **スピード**: ボットは0.1秒で取引完了、人間は数分
3. **疲れない**: 24/7監視、29,000回以上の取引を実行
4. **数学的確実性**: YES+NOは決済時に必ず$1

---

## 技術実装

### Phase 1: 市場監視システム（最優先）

#### 必要な機能
1. **全市場の価格取得**
   - Polymarket API: `get_markets()` + `get_prices()`
   - 更新頻度: 1秒ごと（レート制限内）

2. **アービトラージ機会の検出**
   ```python
   if yes_price + no_price < 0.98:  # 2%以上の歪み
       # アービトラージ機会！
   ```

3. **優先順位付け**
   - 歪みが大きいほど高優先度
   - 流動性が高い市場を優先
   - 手数料を考慮（Polymarket: 2%）

#### 実装ファイル
- `monitor_arbitrage.py`: メイン監視ループ
- `calculate_opportunity.py`: 機会検出ロジック

---

### Phase 2: 高速取引実行

#### 要件
1. **同時注文**: YES と NO を同時に発注
2. **スリッページ対策**: 価格変動に即座に対応
3. **部分約定対応**: 片方だけ約定した場合の処理

#### 実装ファイル
- `execute_arbitrage.py`: 取引実行エンジン
- `order_manager.py`: 注文管理

---

### Phase 3: リスク管理

#### セーフガード
1. **最大ポジション**: 総資金の30%まで
2. **単一市場制限**: 1市場あたり10%まで
3. **緊急停止**: 予期しない損失で自動停止
4. **手数料計算**: 利益 > 手数料の場合のみ実行

#### 実装ファイル
- `risk_manager.py`: リスク管理
- `fee_calculator.py`: 手数料計算

---

## 技術的詳細

### アービトラージ機会の条件

#### 理論値
```
YES + NO = $1.00（理論的に完璧）
```

#### 実際の市場
```
YES: $0.45
NO:  $0.52
合計: $0.97 ← $0.03の歪み
```

#### 取引例
```
投資: $0.97（YES $0.45 + NO $0.52）
決済: $1.00（必ず片方が勝つ）
利益: $0.03
ROI:  3.09%
```

#### 手数料考慮
```
Polymarket手数料: 2%（勝った側のみ）
実質利益: $0.03 - ($0.50 × 0.02) = $0.02
ROI: 2.06%
```

### 検出閾値
- **最小歪み**: 2.5%（手数料 + マージン）
- **最適歪み**: 5%以上
- **警告レベル**: 10%以上（流動性確認必須）

---

## データソース

### Polymarket API
- **Markets**: `https://gamma-api.polymarket.com/markets`
- **Prices**: CLOB Client の `get_prices()`
- **Order Book**: `get_order_book()` で流動性確認

### 更新頻度
- 価格監視: 1秒ごと
- Order Book: 取引前に確認
- レート制限: 調査中（おそらく100 req/min）

---

## 実装スケジュール

### Week 1: プロトタイプ（2026-02-21～）
- [x] プロジェクト設計書作成（このファイル）
- [ ] 市場監視スクリプト作成
- [ ] アービトラージ機会検出ロジック実装
- [ ] テストモード実装（実取引なし）

### Week 2: 本番準備
- [ ] 高速取引実行システム
- [ ] リスク管理システム
- [ ] 手数料計算の精密化
- [ ] エラーハンドリング

### Week 3: 小規模運用
- [ ] $50-100でライブテスト
- [ ] 10-20取引の実績確認
- [ ] パフォーマンス測定
- [ ] 戦略調整

### Week 4〜: スケールアップ
- [ ] 資金投入量の段階的増加
- [ ] 複数市場同時監視
- [ ] 24/7自動運用
- [ ] パフォーマンスレポート自動生成

---

## 期待リターン

### 保守的シナリオ
- 検出頻度: 10回/日
- 平均利益: $0.50/取引
- 月間利益: $150
- 年間ROI: 65%

### 中庸シナリオ
- 検出頻度: 50回/日
- 平均利益: $2/取引
- 月間利益: $3,000
- 年間ROI: 1,300%

### 積極的シナリオ（Blaze実績ベース）
- 検出頻度: 100回/日
- 平均利益: $16.85/取引
- 月間利益: $50,550
- 年間ROI: 22,000%

**注意**: 実績は過去の一例。市場効率化により機会は減少する可能性あり。

---

## リスク分析

### 低リスク
✅ **数学的確実性**: YES+NOは必ず$1で決済
✅ **市場リスクゼロ**: 両方を保有するため価格変動無関係
✅ **流動性リスク**: 大型市場を優先

### 中リスク
⚠️ **手数料**: 2%の手数料が利益を圧迫
⚠️ **スリッページ**: 大量注文時の価格変動
⚠️ **部分約定**: 片方だけ約定するリスク

### 要監視
⚠️ **API制限**: レート制限による機会損失
⚠️ **競合**: 他のボットとの競争
⚠️ **市場効率化**: 機会の減少

---

## 技術スタック

- **言語**: Python 3.9
- **ライブラリ**: 
  - `py-clob-client`: Polymarket API
  - `web3.py`: Polygon blockchain
  - `pandas`: データ分析
  - `asyncio`: 非同期処理
- **インフラ**: DigitalOcean VPS（既存）
- **監視**: OpenClaw + Telegram通知

---

## Next Steps

1. **今すぐ**: 市場監視スクリプト作成
2. **1時間後**: アービトラージ機会の実データ収集
3. **明日**: テスト取引実行
4. **1週間後**: 自動運用開始

---

**Status**: 🚀 実装開始
**Last Updated**: 2026-02-21 21:07 JST
